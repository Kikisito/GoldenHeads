/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java-library'
    id 'maven-publish'
    id 'java'
    id 'eclipse'
    id "org.jetbrains.gradle.plugin.idea-ext" version "1.0.1"
    id 'com.github.johnrengelman.shadow' version '8.1.1'
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }

    maven {
        url = uri('https://maven.pkg.github.com/anjoismysign/BlobLib')
    }

    maven {
        url = uri('https://hub.spigotmc.org/nexus/content/repositories/snapshots/')
    }

    maven {
        url = uri('https://oss.sonatype.org/content/groups/public/')
    }

    maven {
        url = uri('https://repo.codemc.org/repository/maven-public')
    }

    maven {
        url = uri('https://libraries.minecraft.net/')
    }
}

dependencies {
    api libs.bstats.bukkit
    compileOnly libs.spigot.api
    implementation 'org.spongepowered:configurate-yaml:4.1.2'
    implementation 'com.google.inject:guice:7.0.0'
    implementation "net.kyori:adventure-text-serializer-plain:4.16.0"
    implementation "net.kyori:adventure-text-serializer-legacy:4.16.0"
    implementation "net.kyori:adventure-platform-bukkit:4.3.2"
    implementation "net.kyori:adventure-text-minimessage:4.16.0"
    implementation "net.kyori:adventure-api:4.16.0"
    implementation "org.slf4j:slf4j-api:2.0.0-alpha1"
    implementation "com.mojang:authlib:1.5.21"
}

group = 'com.github.kikisito'
version = '2.1'
description = 'An awesome plugin to add golden heads to your server!'
java.sourceCompatibility = JavaVersion.VERSION_17

shadowJar {
    archiveClassifier.set('')
    archiveVersion.set(version)
    relocate 'org.bstats', 'com.github.kikisito.goldenheads.libs.bstats'
}

publishing {
    publications {
        maven(MavenPublication) {
            from(components.java)
        }
    }
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

tasks.withType(Javadoc) {
    options.encoding = 'UTF-8'
}

processResources {
    def props = [version: version]
    inputs.properties props
    filteringCharset = 'UTF-8'
    filesMatching('plugin.yml') {
        expand props
    }
}